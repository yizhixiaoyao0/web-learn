# Promise
> 一种更优的异步编程统一方案，如果直接使用传统回调方式去完成复杂的异步流程，会导致回调地狱；<br/>commonjs社区提出Promise规范，ES2015中被标准化；

1. promise实际上是一个对象，存在三种状态 pending/fulfilled/rejected，一旦明确结果，状态不可能再发生改变。

2. 基本用法
  
   1. 即便promise中是否有异步操作，then里面的回调仍会进入回调队列中排队；
    ```
    const promise = new Promise(function(resolve, reject) {
      // 只能调用二者其一
      resolve(100) // 承诺达成；
      reject(new Error('promise rejected'));
    })

    promise.then(function(value) {
      console.log(value)
    }, function(error) {
      console.log(error);
    })
    ```
3. 使用案例
    ```
    function ajax(url) {
      return new Promise(function(reslove, reject) {
        var xhr = new XMLHttpRequest();
        xhr.open('GET', url);
        xhr.onload = function() {
          if (this.status === 200) {
            reslove(this.response)
          }else {
            reject(new Error(this.statusText))
          }
        }
        xhr.send();
      })
    }

    ajax('../api/user.json').then(function(value) {
      console.log(value);
    }, function(error) {
      console.log(error);
    })
    ```
4. Promise 常见误区
    > promise本质也就是使用回调函数的方式去定义异步任务结束后所需要执行的任务;

    1. 嵌套使用Promise  ✘<br/>
      应尽可能保证异步任务扁平化

       1. promise链式调用

          * promise.then内部会返回promise对象
          * promise.then返回的是全新的promise对象，为了实现Promise链式，每个承诺可以实现一个链式任务；
          * 每一个then方法
      

