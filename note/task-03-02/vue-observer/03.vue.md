# vue 源码

1. vue 静态成员源码

   >  src/core/global-api/index.js

  *  定义`vue.config`

  *  静态方法 `Vue.set\Vue.delete\Vue.nextTick`

  * 设置响应式对象 

    ```js
    Vue.observer = <T>(obj: T): T => {
      observer(obj)
      return obj
    }
    ```
  * 初始化 `components/directives/filters`

    ```js
    Vue.options = Object.create(null)
    ASSET_TYPES.forEach(type => {
      Vue.options[type + 's'] = Object.create(null)
    })
    ```

  * 注册内置组件`keep-alive`

  * 注册`vue.user()`

  * 注册`vue.mixin()`

  * 注册`vue.extend()`, 基于传入的options返回一个组件的构造函数

  * 注册`vue.directive()、 vue.component(), vue.filter()`

2. vue的实例成员
   
   > src/core/instance/index.js

   ![逻辑云图](render.jpg)


3. 响应式原理
   
   * 通过查看源码解决下面问题
     
     - `vm.msg = { count: 0 }`, 重新给属性赋值，是否是响应式的；

     - `vm.arr[0] = 4`, 给数组元素赋值， 视图是否会更新；

     - `vm.arr.length = 0`, 修改数组的length, 视图是否会更新

     - `vm.arr.push(4)`， 视图是否会更新；

   * 响应式处理的入口
     
     整个响应式处理的过程是比较复杂的，下面我们先从
       
       * src\core\instance\init.js
         
         - initState(vm) vm的状态初始化

         - 初始化了 _data、 _props、 methods 等

       * src\core\instance\state.js

4. watcher类

   * watcher 分为三种， computed watcher、 用户 watcher （侦听器）、 渲染watcher

   * 渲染watcher 的创建时机

      - /src/core/instance/lifecycle.js

   * 调试响应式数据执行过程
      
      - 数组响应式处理的核心过程和数组收集依赖的过程

      - 当数组的数据改变的时候watcher的执行过程