# vue-router基本使用


1.  `Vue.use(VueRouter)`

  * vue.use 用于注册组件， 如果传入函数，直接调用函数注册，如果是对象，则调用对象的install来注册

  ```

  Vue.use(VueRouter)

  export.default router = new VueRouter()

  ```

2. 在main.js 内注入

3. 在app.vue内创建路由组件占位符

4. $route 和 $router

    > 创建实例的时候， 会注入这两个属性

    * $route 路由规则， 当前路由的规则

    * $router 是一个vuerouter的一个实例，存储了一些router的方法和当时属性 

5. 相关概念

   * 动态路由

     > 获取动态路由
     
     - `$route.params.id`
     - 路由中开启`props： true`, 组件可以在props中传递

   * 嵌套路由

     > 嵌套路由内部可以使用相对路由和绝对路由  

   * 编程式导航
     
     ```
     this.$router.push('/')
     this.$router.push({name: 'main', params: {id: 1}})
     ```

     ```
     // 不会记录历史，会将当前历史改为login
     this.$router.replace('/login')
     ```

     ```
     this.$router.go(-2)
     this.$router.back()
     ```
   
   * hash 和 history 模式区别

      - hash  带有# 和 ?
        
        hash 模式基于锚点， 以及onhashchange 事件

      - history 需要服务端配置支持
        
        基于html5中的history api 

         * history.pushState() ie10 以后才支持  可以实现客户端路由

         * history.replaceState() 

         * history.push 路径发生变化会向服务器发送请求

      - history模式的支持
         
         * history 需要服务器的支持

         * 单页应用中， 服务端不存在http://www.testurl.com/login 这样的地址会返回找不到该页面

         * 在服务端应该除了静态资源外都返回单页应用的index.html

         ```
         {
           path: '*',
           name: '404',
           component: () => import(/*webpackChunkName: "404" */'../views/404.vue')
         }
         ```

         * mode 默认为hash模式
         







