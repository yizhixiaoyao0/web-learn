# GC算法

* GC就是垃圾回收机制的简写

* GC可以找到内存中的垃圾、并释放和回收空间


### GC里的垃圾

* 程序中不在需要使用对象

```
function func() {
  name = 'cf'
  return `${name} is a coder`
}

func()
```

* 程序中不再需要使用对象，变量能否被引用到


```
function func() {
  const name = 'cf'
  return `${name} is a coder`
}
func()

```


### 引用计算算法

* 核心思想： 设置引用数， 判断当前引用数是否为0；

* 引用计数器

* 引用关系改变时修改引用数字

* 引用数字为0时立即回收

  #### 优点

    * 发现垃圾是立即回收

    * 最大限度减少程序暂停： 时刻监控数值为0的对象空间

  #### 缺点

    * 无法回收循环引用的对象

    * 时间开销大： 当前的引用计数需要维护一个数值的变化，需要时刻监控数值是否需要修改；

### 标记清除算法

* 核心思想： 分表标记和清除二个阶段完成

* 遍历所有对象找标记活动对象

* 遍历所有对象，清除没有标记的对象，并且抹去标记便于下一次GC工作；

* 回收相应的空间，回收的空间放在当前的空闲列表内，方便后续程序申请；

    #### 优点

    * 可以解决对象循环引用的回收操作；

    #### 缺点

    * 回收后地址不连续， 空间碎片化；

    * 不会立即回收垃圾对象， 清除的时候当前程序停止操作


### 标记整理算法实现原理

  * 标记整理可以看做是标记清除的增强；

  * 标记阶段的操作和标记清除一致

  * 清除阶段会先执行整理， 移动对象位置， 能让地址产生连续

  #### 优点

    * 减少碎片化空间

    * 不会立即回收垃圾对象， 清除的时候当前程序停止操作

### 常见GC算法

* 引用计数

* 标记清除

* 标记整理

* 分代回收


